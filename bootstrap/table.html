<!DOCTYPE html>
<html lang="en">
<head>
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css">
<!-- 可选的Bootstrap主题文件（一般不用引入） -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.5/css/jquery.dataTables.css">
<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/1.10.5/js/jquery.dataTables.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var table = $('#example').DataTable( {
        "ajax": {
          "url": "http://exam:5000/pr",
          //"url": "dongdong.txt",
          "dataSrc": "_items"
        },
        "columns": [
            { "data": "owner" },
            { "data": "id" },
            { "data": "title" },
            { "data": "commits" },
            { "data": "" }
        ],
        "columnDefs": [ {
            "targets": -1,
            "data": null,
            "defaultContent": "<button class='btn btn-primary' data-loading-text='Loading...'>CHECK</button>"
        } ],
    } );

    $('#example tbody').on( 'click', 'button', function () {
        var data = table.row( $(this).parents('tr') ).data();
        //alert(data["id"] +"'commit is: "+ data["commits"][0] );
        var result = $.ajax({
            url:"http://exam:5000/commit/"+data["commits"][0],
            dataType:'json',
            jsonp:'callback',
            success:function(result) {
              alert(result['checks']['result']);
              //$(this).parents('td').html((result['checks']['result']));//循环输出a:1,b:2,etc.
            },
            timeout:10000
        });
        //$.getJSON("http://localhost:8080/svn/"+data["commits"][0], function(result){
        //    $(this).parents('td').html(result["x44"]);
        //});
        //$(this).parents('td').html("SYNCED");
    });
} );
</script>
</head>
<body>
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">Panel heading</div>
  <div class="panel-body">
<p>This is a paragraph.</p>
<p>This is another paragraph.</p>
<div id="myDiv"><h2>somethig</h2></div>
  </div>
	<button type="button" id="myButton" data-loading-text="Loading..." class="btn btn-primary" autocomplete="off">
	  Loading state
	</button>
<button id="b01" type="button">Change</button>

  <!-- Table -->
	<table id="example" class="display" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Owner</th>
                <th>PR Id</th>
                <th>Title</th>
                <th>Commits</th>
                <th>Result</th>
            </tr>
        </thead>
 
        <tfoot>
            <tr>
                <th>Owner</th>
                <th>PR Id</th>
                <th>Title</th>
                <th>Commits</th>
                <th>Result</th>
            </tr>
        </tfoot>
 
        <tbody>
            <tr>
                <td>Tiger Nixon</td>
                <td>System Architect</td>
                <td>Edinburgh</td>
            </tr>
            <tr>
                <td>Garrett Winters</td>
                <td>Accountant</td>
                <td>Tokyo</td>
            </tr>
            <tr>
                <td>Ashton Cox</td>
                <td>Junior Technical Author</td>
                <td>San Francisco</td>
            </tr>
            <tr>
                <td>Cedric Kelly</td>
                <td>Senior Javascript Developer</td>
                <td>Edinburgh</td>
            </tr>
            <tr>
                <td>Airi Satou</td>
                <td>Accountant</td>
                <td>Tokyo</td>
            </tr>
        </tbody>
    </table>
</div>

</body>
</html>